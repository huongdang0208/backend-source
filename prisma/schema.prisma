// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

model User {
    id         Int      @id @default(autoincrement())
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    email    String    @unique
    password String
    username String    @unique
    role     String
    orders   Order[]
    Session  Session[]
}

model Session {
    id         Int      @id @default(autoincrement())
    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    userId Int
    user   User @relation(fields: [userId], references: [id])

    accessToken  String
    refreshToken String
}

// onDelete: Cascad mean when parent model of this model is deleted, in case when User model is deleted, the Bookmark is delete

model Order {
    orderId          Int    @id @default(autoincrement())
    productId        Int
    productName      String
    receiverLocation String
    receiverPhone    String
    quantity         Int
    totalPrice       Int
    orderStatus      String

    ownerId Int
    owner   User @relation(fields: [ownerId], references: [id])

    product Product @relation(fields: [productId], references: [product_id])

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Blog {
    blog_id     Int    @id @default(autoincrement())
    title       String
    description String @db.LongText

    images    File? @relation(fields: [images_id], references: [file_id])
    images_id Int?

    products Product[]

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}

model Product {
    product_id Int @id @default(autoincrement())

    product_name String
    data         Data?

    detail_description String? @db.LongText
    instruction        String? @db.LongText

    images_id Int?
    images    File? @relation(fields: [images_id], references: [file_id])

    product_status String
    price          Int
    product_characteristic String? @db.LongText

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt

    blogs Blog[]
    Order Order[]
}

model Data {
    data_id Int @id @default(autoincrement())

    size   Int?
    weight Int?
    power  Int?

    product    Product @relation(fields: [product_id], references: [product_id])
    product_id Int     @unique
}

model File {
    file_id  Int    @id @default(autoincrement())
    filename String
    size     Int
    mimetype String
    path     String
    cdn_path String

    blog    Blog[]
    product Product[]

    created_at DateTime @default(now())
    updated_at DateTime @updatedAt
}
